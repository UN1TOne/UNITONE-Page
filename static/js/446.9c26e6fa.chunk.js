"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[446],{446:(e,t,n)=>{function o(e,t,n){var o=new n.Scene(e);o.useRightHandedSystem=!0,n.PHYSICS?(console.log("Using Havok from BabylonScene.tsx",n.PHYSICS),o.enablePhysics(new n.Vector3(0,-9.8,0),n.PHYSICS)):console.error("Havok Plugin is not available in BabylonScene.tsx");var i=new n.FreeCamera("camera1",new n.Vector3(0,0,0),o);i.minZ=.1,i.attachControl(t,!0),i.angularSensibility=4e3,i.speed=1,new n.HemisphericLight("light",new n.Vector3(0,1,0),o).intensity=.7;!function(e){let t=e.getEngine().getRenderingCanvas();t.addEventListener("click",(e=>{t.requestPointerLock=t.requestPointerLock||t.msRequestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock&&t.requestPointerLock()}),!1)}(o),n.MeshBuilder.CreateBox("wall",{height:4,width:6,depth:.1},o).position.z=3;const r="Arms_Idle",a="Arms_Fire",l="Arms_fullreload";let s,c=!1;let d=null,u=null;const p=1e-4;let h,g,m,I=30,f=!1,v=.002;let T=!1,x={x:0,y:0};let E=0,P=!1;const C=new n.AnimationGroup("resetRotationAnimationGroup");let A=I;return n.SceneLoader.ImportMesh("","https://raw.githubusercontent.com/AntonioToonit/Asset/master/","fps_animations_lowpoly_mp5.glb",o,((e,t,y,R)=>{const b=e[0];b.setParent(i),b.position=new n.Vector3(0,-1.4,-.3),R.forEach((e=>e.stop()));R.find((e=>e.name===r)).play();const w=R.find((e=>e.name===a)),N=R.find((e=>e.name===l)),k=n.MeshBuilder.CreateBox("firePoint",{size:.1},o);k.setParent(b.getChildMeshes(!1,(e=>"Object_7"===e.name))[0]),k.position=new n.Vector3(-.03,.469,.642),k.setEnabled(!1),o.onPointerObservable.add((e=>{if(e.type===n.PointerEventTypes.POINTERMOVE){const t=e.event.clientX,n=e.event.clientY;if(null!==d&&null!==u){const e=t-d,o=n-u;i.rotation.y-=e*p,i.rotation.x+=o*p,i.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,i.rotation.x))}d=t,u=n;const o={x:e.event.clientX,y:e.event.clientY};(o.x!==x.x||o.y!==x.y)&&(x=o,E=0,P=!1)}else e.type===n.PointerEventTypes.POINTERUP&&(d=null,u=null);e.type===n.PointerEventTypes.POINTERDOWN&&0===e.event.button?(c=!0,s||(s=setInterval((()=>{if(c&&!f)if(console.log(c,f),I>0){h||void 0!==g||(g=i.rotation.x,m=i.rotation.y),L.position=i.position.clone(),L.isVisible=!0;var e=i.getFrontPosition(1).subtract(i.position).normalize().scale(2);L.direction=e,G=!0,w&&(w.stop(),w.play()),I--,A.text=` ${I} / \u221e`,function(){if(!h&&c){T=!1,i.rotation.x-=v;const e=.01*(Math.random()-.5);i.rotation.y+=e,v<=0&&(clearInterval(h),h=void 0)}}()}else f=!0,N&&(N.play(),N.onAnimationGroupEndObservable.add((()=>{f=!1,I=30,A.text=` ${I} / \u221e`})));else S()}),70))):e.type===n.PointerEventTypes.POINTERUP&&0===e.event.button&&(c=!1,S()),P||(E+=o.getEngine().getDeltaTime(),E>=100&&(P=!0))}));var L=n.MeshBuilder.CreateSphere("projectile",{diameter:.2},o);L.isVisible=!1;var M=new n.StandardMaterial("decalMat",o);M.diffuseTexture=new n.Texture("https://i.imgur.com/RnEDoXg.png",o),M.diffuseTexture.hasAlpha=!0,M.useAlphaFromDiffuseTexture=!0,M.zOffset=-2;var G=!1;let _=["gunSight","projectile"],O=[];function S(){clearInterval(s),s=void 0,P&&(T=!0)}o.registerBeforeRender((()=>{if(G){L.position.addInPlace(L.direction);var e=o.pickWithRay(new n.Ray(L.absolutePosition,L.direction),(e=>e!==L));if(e.hit)if(_.includes(e.pickedMesh.name))console.log("xxxx"),setTimeout((()=>{L.isVisible=!1,G=!1}),100);else{var t=new n.Vector3(.1,.1,.1),i=n.MeshBuilder.CreateDecal("decal",e.pickedMesh,{position:e.pickedPoint,normal:e.getNormal(!0),size:t,angle:0});i.material=M,O.push(i),O.length>20&&(O[0].dispose(),O.shift()),G=!1,L.isVisible=!1}}})),function(){const e=n.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");A=new n.GUI.TextBlock,A.text=` ${I} / \u221e`,A.color="white",A.fontSize=24,A.textHorizontalAlignment=n.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,A.textVerticalAlignment=n.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,A.paddingBottomInPixels=20,e.addControl(A)}(),o.registerBeforeRender((()=>{!T&&P&&C&&C.stop()}))})),function(){var e=n.GUI.AdvancedDynamicTexture.CreateFullscreenUI("crosshair"),t=new n.GUI.Rectangle;t.width="30px",t.height="3px",t.background="green",t.thickness=0,t.horizontalAlignment=n.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,t.verticalAlignment=n.GUI.Control.VERTICAL_ALIGNMENT_CENTER,e.addControl(t);var o=new n.GUI.Rectangle;o.width="3px",o.height="30px",o.background="green",o.thickness=0,o.horizontalAlignment=n.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,o.verticalAlignment=n.GUI.Control.VERTICAL_ALIGNMENT_CENTER,e.addControl(o)}(),o}n.r(t),n.d(t,{createScene:()=>o})}}]);
//# sourceMappingURL=446.9c26e6fa.chunk.js.map