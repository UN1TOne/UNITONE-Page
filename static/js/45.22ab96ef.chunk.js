"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[45],{58045:(e,t,a)=>{async function o(e,t,a){console.clear();const o=new a.Scene(e);o.clearColor=new a.Color4(.11,.11,.36),o.useRightHandedSystem=!0;var n=new a.ArcRotateCamera("camera",a.Tools.ToRadians(90),a.Tools.ToRadians(65),10,a.Vector3.Zero(),o);n.setTarget(new a.Vector3(1.14,1.7,0)),n.alpha=.676,n.beta=1.17,n.radius=14,n.inertia=.4,n.wheelDeltaPercentage=.3,n.panningSensibility=1e4,n.minZ=.01,n.maxZ=1e4,n.attachControl(t,!0),new a.HemisphericLight("light",new a.Vector3(0,1,0),o).intensity=.7;let i=!0,l=0,r=0,s=!1,c=!1,d=null,h=a.Vector3.One(),p=null,m=!0,u=!1,g=!1,T=!1,v=null,b=null;const f={manager:new a.AssetsManager(o)},I={},x=[];await async function(){f.model=f.manager.addMeshTask("model","","https://raw.githubusercontent.com/UN1TOne/3DAsset/master/","metal_slug_tank.glb"),f.decal1=f.manager.addTextureTask("decal_logo","https://raw.githubusercontent.com/UN1TOne/3DAsset/master/Images/UNIT logo transparent.png"),f.manager.load(),f.manager.onTaskErrorObservable.add((e=>{console.log("Error loading task: "+e.name),console.log(e.errorObject.message,e.errorObject.exception)})),f.manager.onFinish=e=>{console.log("Finished loading tasks",e),I.root=f.model.loadedMeshes[0],I.root.scaling.scaleInPlace(100),x.push(f.decal1.texture),function(){x[0].vAng=Math.PI;const e=a.Vector3.One().scaleInPlace(.1),t=x[0].width?x[0].width:2048,n=x[0].height?x[0].height:2048;d=a.MeshBuilder.CreateBox("decal_projector",{width:e.x*t/100,height:e.y*n/100,depth:10*e.z},o),d.position=a.Vector3.Zero(),d.rotation=a.Vector3.Zero(),d.scaling=a.Vector3.One(),d.material=new a.PBRMaterial("projectorMat",o),d.material.alpha=0,d.material.backFaceCulling=!1,d.showBoundingBox=!0,d.visibility=1,b=new a.PBRMaterial("decalMat"+l,o),b.albedoTexture=x[0],b.albedoTexture.hasAlpha=!0,b.useAlphaFromAlbedoTexture=!0,b.zOffset=-2,b.backFaceCulling=!1,b.unlit=!0;let I=null,C=[];const k=()=>{var e=o.pick(o.pointerX,o.pointerY,(e=>e.isEnabled()&&e!==d));if(e){if((e.hit||g)&&d){d.visibility=1,p&&(p.dispose(),p=null),I=o.activeCamera.getForwardRay().direction.negateInPlace().normalize();let i=a.Vector3.Zero();if(i=e.pickedPoint&&!g?e.pickedPoint:d.absolutePosition,e.pickedMesh&&(v=e.pickedMesh),T){for(const e of o.meshes)if(e.isEnabled()&&e!==d){const t=e.intersectsMesh(d);if(t&&!C.includes(e))C.push(e);else if(!t&&C.includes(e)){const t=C.indexOf(e);t>-1&&C.splice(t,1)}}}else e.pickedMesh?(C=[],C.push(e.pickedMesh)):(C=[],v&&C.push(v));if(C.length>0&&(e.pickedMesh||g))for(const e of C){w(e);const s="decal_"+l+"_"+f.decal1.name+"_"+e.name+"_",c=o.meshes.filter((e=>e.name===s));if(p=a.MeshBuilder.CreateDecal(s,e,{position:i,normal:I,angle:r,size:new a.Vector3(t/1e3*h.x,n/1e3*h.y,2*h.z),cullBackFaces:m,localMode:!0}),(p.getTotalVertices()<1||!p.subMeshes)&&p.dispose(),p.material=b,p.alwaysSelectAsActiveMesh=!0,p.material.metallic=0,p.material.backFaceCulling=!0,c.length>0){for(let e=0;e<c.length;e++)c[e].dispose(),c.splice(e,1);for(const e of c)e.dispose()}}const s=-Math.atan2(I.z,I.x)-Math.PI/2,c=Math.sqrt(I.x*I.x+I.z*I.z),u=Math.atan2(I.y,c);g||(d.position.copyFrom(i),d.rotation.set(u,s,r))}else p&&(p.visibility=1),d.visibility=1;const i=o.meshes.filter((e=>e.name.startsWith("decal_")));i.length>0&&i.forEach((e=>{e.intersectsMesh(d)||e.dispose()}))}setTimeout((()=>{c=!1}),1e3)};var M=a.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI"),A=new a.GUI.StackPanel;A.width="210px",A.isVertical=!1,A.horizontalAlignment=a.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,A.verticalAlignment=a.GUI.Control.VERTICAL_ALIGNMENT_CENTER,M.addControl(A);var O=new a.GUI.Checkbox;O.width="20px",O.height="20px",O.isChecked=!1,O.color="green",O.onIsCheckedChangedObservable.add((function(e){var t;T=!T,o.meshes.filter((e=>e.name.startsWith("decal_")&&e!==d)).forEach((e=>e.dispose())),null===(t=p)||void 0===t||t.dispose(),k()})),A.addControl(O);var _=new a.GUI.TextBlock;_.text=" Use Multiple mode",_.width="180px",_.marginLeft="5px",_.textHorizontalAlignment=a.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,_.color="white",A.addControl(_);var E=new a.GUI.StackPanel;E.width="220px",E.top="80px",E.horizontalAlignment=a.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,E.verticalAlignment=a.GUI.Control.VERTICAL_ALIGNMENT_CENTER,M.addControl(E);var U=new a.GUI.TextBlock;U.text="Decal Size: 1",U.height="30px",U.color="white",E.addControl(U);var G=new a.GUI.Slider;G.minimum=.1,G.maximum=2,G.value=1,G.step=.1,G.height="20px",G.width="200px",G.onValueChangedObservable.add((function(e){var t;U.text="Decal Size: "+e.toFixed(1),h=new a.Vector3(e,e,e),d.scaling=new a.Vector3(e,e,e),null===(t=p)||void 0===t||t.dispose(),k()})),E.addControl(G);var N=new a.GUI.TextBlock;N.text="Decal Rotation: 0\u02da",N.height="30px",N.color="white",E.addControl(N);var R=new a.GUI.Slider;R.minimum=0,R.maximum=2*Math.PI,R.value=0,R.step=.01,R.height="20px",R.width="200px",R.onValueChangedObservable.add((function(e){var t;c=!0,r=e,N.text="Decal Rotation: "+a.Tools.ToDegrees(e).toFixed(0)+"\u02da",null===(t=p)||void 0===t||t.dispose(),k()})),E.addControl(R);const V=2;let y=0;const P=o.onBeforeRenderObservable.add((()=>{if(p){if(p.material.backFaceCulling=!1,i||(u=!0),u||s){if(s){var e;null===(e=p)||void 0===e||e.dispose(!1,!0),o.meshes.filter((e=>e.name.includes("decal_"+l+"_"+f.decal1.name))).forEach((e=>e.dispose(!1,!0)))}else{var t;const e=o.meshes.filter((e=>e.name.startsWith("decal_")));if(e.length>0&&e.forEach((e=>{e.name=e.name.replace("decal_","Decal_");const t=e.getVerticesData(a.VertexBuffer.NormalKind);if(t){const o=new a.Vector3(t[0],t[1],t[2]),n=.001,i=e.position.add(o.scale(n));e.position=i}})),p.getTotalVertices()>1&&null!==(t=p)&&void 0!==t&&t.subMeshes){const e=p.clone(p.name);e.material.backFaceCulling=!1,e.material.metallic=0}p.dispose()}return l++,d&&(d.position=a.Vector3.Zero(),d.rotation=a.Vector3.Zero(),d.scaling=a.Vector3.One(),d.dispose(!1,!0)),r=0,x[0]=null,o.onPointerObservable.remove(L),o.onBeforeRenderObservable.remove(P),s=!1,u=!1,g=!1,void(i=!1)}c&&k()}})),L=o.onPointerObservable.add(((e,t)=>{switch(e.type){case a.PointerEventTypes.POINTERDOWN:if(0===e.event.button){var n=o.pick(o.pointerX,o.pointerY,(e=>"decal_projector"===e.name));n&&n.pickedMesh&&"decal_projector"===n.pickedMesh.name&&n.hit&&(g=!g)}break;case a.PointerEventTypes.POINTERMOVE:g||(0===y&&k(),y=(y+1)%V)}}))}()}}();const w=e=>{let t=null;return e&&null!=e.parent?w(e.parent):t=e,t};var C=document.createElement("input");C.type="file",C.accept="image",C.style.display="none",document.body.appendChild(C);var k=a.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UploadButtonUI"),M=a.GUI.Button.CreateSimpleButton("uploadBtn","Upload your Image");return M.width="200px",M.height="40px",M.color="white",M.background="green",M.horizontalAlignment=a.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,M.verticalAlignment=a.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,M.onPointerClickObservable.add((()=>{C.click()})),k.addControl(M),C.addEventListener("change",(function(e){const t=e.target.files[0];if(t){const e=URL.createObjectURL(t);b.albedoTexture=new a.Texture(e,o),b.albedoTexture.hasAlpha=!0}})),o}a.r(t),a.d(t,{createScene:()=>o})}}]);
//# sourceMappingURL=45.22ab96ef.chunk.js.map