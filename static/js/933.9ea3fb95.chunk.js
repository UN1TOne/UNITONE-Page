"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[933],{41933:(e,t,n)=>{async function o(e,t,n){const o=new n.Scene(e);console.clear(),o.clearColor=new n.Color4(.75,.75,.9);const i=new n.ArcRotateCamera("camera",-.873,1,14,n.Vector3.Zero(),o);i.attachControl(t,!0);new n.HemisphericLight("light",new n.Vector3(0,1,0),o);var a=n.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");a.idealWidth=600;const r=new n.TransformNode("Step",o);r.position.y=.2,r.position.z=-3.5;for(let D=0;D<5;D++){const e=n.MeshBuilder.CreateBox("step"+D,{width:3,height:.5,depth:1},o);e.position.set(0,.5*D,1*D),e.parent=r}n.MeshBuilder.CreateBox("ground",{width:8,height:.1,depth:15},o).position.y=-.05;const l=new n.TransformNode("Indicator",o);!function(e){var t=new n.StandardMaterial("indicatorMat",e);t.diffuseColor=new n.Color3(1,.1,.25);var o=n.MeshBuilder.CreateCylinder("arrowBody",{height:.3,diameter:.1},e),i=n.MeshBuilder.CreateCylinder("arrowHead",{height:.15,diameterTop:0,diameterBottom:.2},e);i.position.y=.15,o.material=t,i.material=t,o.setParent(l),i.setParent(l),l.position=r.getChildMeshes()[4].absolutePosition.clone().add(new n.Vector3(.2,.7,-.2)),l.rotationQuaternion=n.Quaternion.RotationAxis(n.Axis.X,Math.PI);var s=new n.GUI.Rectangle("Indicator Rect");s.width=.2,s.height="30px",s.width="300px",s.cornerRadius=12,s.color="black",s.thickness=0,s.background="transparent",a.addControl(s),s.linkWithMesh(l),s.linkOffsetY=-40;var c=new n.GUI.TextBlock("Indicator label");c.text="Click Here!",c.resizeToFit=!0,s.addControl(c),g()}();var s=new n.StandardMaterial("arrowMat",o);s.diffuseColor=new n.Color3(.1,.2,1);var c=[];function d(e){var t=[new n.Vector3(-.2,0,-.1),new n.Vector3(0,0,.1),new n.Vector3(.2,0,-.1),new n.Vector3(0,0,-.05)],o=n.MeshBuilder.ExtrudePolygon("chevron",{shape:t,depth:.02},e);return o.material=s,o.renderingGroupId=1,o}function h(e){c.forEach((e=>e.dispose())),c=[];for(let t=1;t<e.length;t++){let i=e[t-1],a=e[t],r=n.Vector3.Distance(i,a),l=a.subtract(i).normalize(),s=Math.floor(r/.4);for(let e=0;e<s;e++){let t=(e+1)/(s+1),r=n.Vector3.Lerp(i,a,t),h=d(o);h.position=r;let g=Math.atan2(l.x,l.z);h.rotation.y=g,c.push(h)}}c.forEach(((e,t)=>{let i=new n.Animation("arrowPulse","visibility",10,n.Animation.ANIMATIONTYPE_FLOAT,n.Animation.ANIMATIONLOOPMODE_CYCLE),a=[{frame:0,value:.15},{frame:10,value:1},{frame:20,value:.15}];i.setKeys(a);let r=2*t;o.beginDirectAnimation(e,[i],r,20,!0)}))}function g(){let e=new n.Animation("indicator move","position",10,n.Animation.ANIMATIONTYPE_VECTOR3,n.Animation.ANIMATIONLOOPMODE_CYCLE),t=[{frame:0,value:l.position},{frame:10,value:l.position.add(new n.Vector3(0,.5,0))},{frame:20,value:l.position}];e.setKeys(t),o.beginDirectAnimation(l,[e],0,20,!0)}let p=new n.RecastJSPlugin;p.createNavMesh(o.meshes.filter((e=>!e.isDescendantOf(l))),{cs:.2,ch:.2,walkableSlopeAngle:90,walkableHeight:2,walkableClimb:3,walkableRadius:.3,maxEdgeLen:0,maxSimplificationError:3.5,minRegionArea:1,mergeRegionArea:15,maxVertsPerPoly:6,detailSampleDist:1,detailSampleMaxError:.5});var u=p.createDebugNavMesh(o);u.position=new n.Vector3(0,.01,0);var f=new n.StandardMaterial("matdebug",o);f.diffuseColor=new n.Color3(.1,.2,1),f.alpha=.2,u.material=f;var m,w,C=[],v=!1,A=p.createCrowd(10,.1,o),M={radius:.3,height:.4,maxAcceleration:8,maxSpeed:3,collisionQueryRange:.5,pathOptimizationRange:0,separationWeight:1};for(w=0;w<1;w++){var k=n.MeshBuilder.CreateBox("cube",{size:.2,height:.2},o),x=n.MeshBuilder.CreateBox("cube",{size:.1,height:.1},o),P=new n.StandardMaterial("mat2",o),I=Math.random();P.diffuseColor=new n.Color3(.4+.6*I,.3,1-.3*I),k.material=P;var b=p.getRandomPointAround(new n.Vector3(-2,.1,-1.8),.5),O=new n.TransformNode,T=A.addAgent(b,M,O);C.push({idx:T,trf:O,mesh:k,target:x});var y=new n.GUI.Rectangle("Agent Rect");y.width=.2,y.height="20px",y.width="60px",y.cornerRadius=12,y.color="Orange",y.thickness=4,y.background="green",a.addControl(y),y.linkWithMesh(k),y.linkOffsetY=-60;var R=new n.GUI.TextBlock("Agent TB");R.text="Agent",R.resizeToFit=!0,y.addControl(R);var E=new n.GUI.Ellipse("Agent El");E.width="4px",E.height="4px",E.color="Orange",E.thickness=2,E.background="green",a.addControl(E),E.linkWithMesh(k);var V=new n.GUI.Line("Agent Line");V.lineWidth=2,V.color="Orange",V.y2=8,V.linkOffsetY=-1,a.addControl(V),V.linkWithMesh(k),V.connectedControl=y}new n.StandardMaterial("line",o).emissiveColor=new n.Color3(.35,.42,1);var B=function(e){if(m=function(){var e=o.pick(o.pointerX,o.pointerY);return e.hit?e.pickedPoint:null}()){setTimeout((function(){i.detachControl(t)}),0);var n,a=A.getAgents();for(n=0;n<a.length;n++)A.agentGoto(a[n],p.getClosestPoint(m));var r=p.computePath(A.getAgentPosition(a[0]),p.getClosestPoint(m));r.length>1&&h(r)}};function N(e,t){let o=A.getAgentPosition(e);if(n.Vector3.Distance(o,t)<.1){c.forEach((e=>e.dispose())),c=[],function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return n.Vector3.Distance(e,t)<=o}(o,r.getChildMeshes()[4].absolutePosition)&&(v||(alert("\ud83c\udf89 Well Done \ud83c\udf89"),v=!0))}}return o.onPointerObservable.add((e=>{switch(e.type){case n.PointerEventTypes.POINTERDOWN:e.pickInfo.hit&&B(e.pickInfo.pickedMesh);break;case n.PointerEventTypes.POINTERUP:if(e.pickInfo.hit){l.dispose();var t=a.getDescendants().find((e=>"Indicator Rect"===e.name));t&&t.dispose()}}})),o.onBeforeRenderObservable.add((()=>{var e=C.length;for(let i=0;i<e;i++){var t=C[i];t.mesh.position=A.getAgentPosition(t.idx);let e=A.getAgentVelocity(t.idx);if(A.getAgentNextTargetPathToRef(t.idx,t.target.position),e.length()>.2){e.normalize();var o=Math.atan2(e.x,e.z);t.mesh.rotation.y=t.mesh.rotation.y+.05*(o-t.mesh.rotation.y)}if(p&&m instanceof n.Vector3){let e=p.getClosestPoint(m);e&&N(t,e)}}})),o}n.r(t),n.d(t,{createScene:()=>o})}}]);
//# sourceMappingURL=933.9ea3fb95.chunk.js.map